# rVim 扩展全面功能清单

## 📋 核心功能模块

### 1. 🔗 链接提示 (Link Hints)
- **功能描述**: 按 `f` 键显示页面所有链接的提示标签
- **快捷键**: 
  - `f` - 在当前标签页打开链接
  - `F` - 在新标签页打开链接
- **测试场景**:
  - [ ] 基本链接提示显示
  - [ ] 链接提示标签可见性
  - [ ] 当前标签页打开链接
  - [ ] 新标签页打开链接
  - [ ] 复杂页面链接识别
  - [ ] 动态内容链接提示

### 2. 🧭 Vim 导航 (Navigation)
- **功能描述**: 使用 Vim 风格的键位进行页面导航
- **快捷键**:
  - `h/j/k/l` - 左/下/上/右滚动
  - `gg` - 页面顶部
  - `G` - 页面底部
  - `H/L` - 浏览器后退/前进
  - `d/u` - 向下/向上半页滚动
  - `Ctrl+d/Ctrl+u` - 向下/向上整页滚动
- **测试场景**:
  - [ ] 基本方向键导航
  - [ ] 页面顶部/底部跳转
  - [ ] 浏览器历史导航
  - [ ] 滚动距离准确性
  - [ ] 平滑滚动效果

### 3. 🔍 搜索功能 (Search)
- **功能描述**: 强大的页面内搜索和全局搜索功能
- **快捷键**:
  - `/` - 页面内搜索
  - `?` - 反向搜索
  - `n/N` - 下一个/上一个搜索结果
  - `*/#` - 搜索当前单词
- **搜索特性**:
  - 正则表达式支持
  - 大小写敏感/不敏感
  - 智能大小写
  - 搜索结果高亮
  - 增量搜索
- **测试场景**:
  - [ ] 基本文本搜索
  - [ ] 正则表达式搜索
  - [ ] 大小写敏感搜索
  - [ ] 搜索结果导航
  - [ ] 搜索结果高亮
  - [ ] 增量搜索功能

### 4. 📑 标签页管理 (Tab Management)
- **功能描述**: 键盘快捷键管理浏览器标签页
- **快捷键**:
  - `t` - 新建标签页
  - `x` - 关闭当前标签页
  - `X` - 恢复关闭的标签页
  - `J/K` - 切换到左/右标签页
  - `g0/g$` - 第一个/最后一个标签页
  - `<</>>`- 移动标签页位置
- **测试场景**:
  - [ ] 新建标签页
  - [ ] 关闭标签页
  - [ ] 恢复关闭的标签页
  - [ ] 标签页切换
  - [ ] 标签页移动
  - [ ] 标签页定位

### 5. 📚 书签管理 (Bookmarks)
- **功能描述**: 键盘操作管理和访问书签
- **命令**:
  - `:bookmarks` - 搜索和打开书签
  - `:addbookmark` - 添加当前页面到书签
- **测试场景**:
  - [ ] 书签搜索功能
  - [ ] 书签打开
  - [ ] 添加书签
  - [ ] 书签文件夹支持
  - [ ] 书签快速访问

### 6. 📜 历史记录 (History)
- **功能描述**: 浏览历史的键盘导航和搜索
- **命令**:
  - `:history` - 搜索浏览历史
- **测试场景**:
  - [ ] 历史记录搜索
  - [ ] 历史页面访问
  - [ ] 历史记录导航

### 7. 👁️ 视觉模式 (Visual Mode)
- **功能描述**: 文本选择和复制功能
- **快捷键**:
  - `v` - 字符选择模式
  - `V` - 行选择模式
  - `y` - 复制选中内容
  - `p` - 粘贴内容
- **测试场景**:
  - [ ] 字符选择模式
  - [ ] 行选择模式
  - [ ] 文本复制功能
  - [ ] 剪贴板集成

### 8. ⌨️ 命令模式 (Command Mode)
- **功能描述**: 通过命令栏执行各种命令
- **快捷键**:
  - `:` - 打开命令栏
  - `Tab` - 命令补全
- **常用命令**:
  - `:open <url>` - 打开网址
  - `:tabopen <url>` - 在新标签页打开网址
  - `:set <setting>` - 修改设置
  - `:help` - 显示帮助
- **测试场景**:
  - [ ] 命令栏打开
  - [ ] 命令补全功能
  - [ ] URL 打开命令
  - [ ] 设置修改命令
  - [ ] 帮助命令

### 9. 🔧 设置和配置 (Settings)
- **功能描述**: 扩展设置和自定义配置
- **设置项**:
  - 键盘映射自定义
  - 搜索引擎配置
  - 外观主题设置
  - 行为选项配置
- **测试场景**:
  - [ ] 设置页面访问
  - [ ] 键盘映射修改
  - [ ] 搜索引擎配置
  - [ ] 设置保存和恢复

### 10. 🎯 提示和帮助 (Hints & Help)
- **功能描述**: 用户帮助和操作提示
- **快捷键**:
  - `?` - 显示帮助
  - `:help` - 命令帮助
- **测试场景**:
  - [ ] 帮助页面显示
  - [ ] 快捷键列表
  - [ ] 功能说明

## 🧪 测试优先级

### 高优先级 (Critical)
1. 链接提示功能 (f/F 键)
2. 基本导航 (hjkl, gg, G)
3. 搜索功能 (/键搜索)
4. 标签页管理 (t, x, J/K)

### 中优先级 (Important)
1. 视觉模式 (v, V, y)
2. 命令模式 (:命令)
3. 书签管理
4. 历史记录

### 低优先级 (Nice to have)
1. 高级设置配置
2. 自定义键盘映射
3. 主题和外观
4. 帮助文档

## 🐛 已知问题和修复状态

### 已修复问题
- ✅ Service Worker 环境下的 localStorage 兼容性
- ✅ XMLHttpRequest 安全策略问题
- ✅ 脚本加载顺序问题
- ✅ 搜索功能初始化问题

### 待测试问题
- ⏳ f/F 键链接提示在某些页面失效
- ⏳ 搜索高亮在动态内容中的表现
- ⏳ 复杂页面的性能影响

## 📊 测试覆盖率目标

- **核心功能**: 100% 覆盖
- **边界情况**: 80% 覆盖
- **兼容性测试**: 主流网站 90% 兼容
- **性能测试**: 响应时间 < 100ms

## 🔄 测试执行计划

1. **第一阶段**: 核心功能基础测试
2. **第二阶段**: 边界情况和错误处理
3. **第三阶段**: 兼容性和性能测试
4. **第四阶段**: 用户体验和可用性测试
5. **第五阶段**: 回归测试和最终验证

---

*文档创建时间: 2024年12月19日*
*版本: 1.0*
*状态: 待测试*