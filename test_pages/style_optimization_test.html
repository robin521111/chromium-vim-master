<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rVim æ ·å¼ä¼˜åŒ–æµ‹è¯•é¡µé¢</title>
    <style>
        /* æ¨¡æ‹Ÿå¯èƒ½å¯¼è‡´å†²çªçš„ç½‘é¡µæ ·å¼ */
        
        /* å…¨å±€æ ·å¼é‡ç½® - å¯èƒ½å½±å“æ’ä»¶ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        /* é«˜z-indexå…ƒç´  - å¯èƒ½è¦†ç›–æ’ä»¶ */
        .high-z-index {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 50px;
            background: rgba(255, 0, 0, 0.8);
            z-index: 999999;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        /* å…¨å±€å­—ä½“è¦†ç›– */
        body, div, span, p {
            font-family: 'Comic Sans MS', cursive !important;
            font-size: 16px !important;
            line-height: 1.6 !important;
        }
        
        /* å…¨å±€transform - å¯èƒ½å½±å“å®šä½ */
        .transform-container {
            transform: scale(0.9) rotate(1deg);
            transform-origin: center;
        }
        
        /* å…¨å±€å®šä½ä¸Šä¸‹æ–‡ */
        .positioning-context {
            position: relative;
            z-index: 1000;
        }
        
        /* æ¨¡æ‹Ÿæ¡†æ¶æ ·å¼ - å¯èƒ½ä¸æ’ä»¶å†²çª */
        [class*="hint"], [id*="command"], [class*="modal"] {
            background: pink !important;
            color: purple !important;
            font-size: 20px !important;
            border: 3px solid orange !important;
        }
        
        /* é¡µé¢å†…å®¹æ ·å¼ */
        .content {
            max-width: 800px;
            margin: 80px auto 20px;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 8px;
        }
        
        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .test-links {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }
        
        .test-links a {
            padding: 8px 16px;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            transition: background 0.2s;
        }
        
        .test-links a:hover {
            background: #0056b3;
        }
        
        .conflict-demo {
            position: relative;
            height: 200px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        
        .status-info {
            background: #e9ecef;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin: 15px 0;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: #007bff;
            color: white;
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-warning {
            background: #ffc107;
            color: #212529;
        }
        
        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .content {
                margin: 60px 10px 10px;
                padding: 15px;
            }
            
            .test-links {
                flex-direction: column;
            }
            
            .button-group {
                flex-direction: column;
            }
        }
        
        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        /* æ¨¡æ‹Ÿç¬¬ä¸‰æ–¹åº“æ ·å¼å†²çª */
        .bootstrap-like {
            position: relative !important;
            z-index: 1050 !important;
        }
        
        .material-like {
            box-shadow: 0 4px 8px rgba(0,0,0,0.12), 0 2px 4px rgba(0,0,0,0.08) !important;
            border-radius: 4px !important;
        }
        
        /* è¦†ç›–æ‰€æœ‰å¯èƒ½çš„æ’ä»¶æ ·å¼ */
        [id^="rVim"], [class^="rVim"] {
            background: red !important;
            color: yellow !important;
            font-size: 24px !important;
            border: 5px solid blue !important;
            z-index: 1 !important;
        }
    </style>
</head>
<body>
    <!-- é«˜z-indexè¦†ç›–å±‚ -->
    <div class="high-z-index">
        é«˜z-indexè¦†ç›–å±‚ (z-index: 999999) - æµ‹è¯•æ’ä»¶æ˜¯å¦èƒ½æ­£ç¡®æ˜¾ç¤ºåœ¨ä¸Šæ–¹
    </div>
    
    <div class="transform-container">
        <div class="positioning-context">
            <div class="content">
                <h1>rVim æ ·å¼ä¼˜åŒ–æµ‹è¯•é¡µé¢</h1>
                <p>æ­¤é¡µé¢ç”¨äºæµ‹è¯•rVimæ’ä»¶çš„æ ·å¼ä¼˜åŒ–åŠŸèƒ½ï¼ŒåŒ…å«å¤šç§å¯èƒ½å¯¼è‡´æ ·å¼å†²çªçš„å…ƒç´ ã€‚</p>
                
                <div class="section">
                    <h2>ğŸ”— é“¾æ¥æç¤ºæµ‹è¯•</h2>
                    <p>æŒ‰ <kbd>f</kbd> é”®æ¿€æ´»é“¾æ¥æç¤ºåŠŸèƒ½ï¼Œæµ‹è¯•é“¾æ¥æç¤ºæ˜¯å¦èƒ½æ­£ç¡®æ˜¾ç¤ºï¼š</p>
                    <div class="test-links">
                        <a href="#test1">æµ‹è¯•é“¾æ¥ 1</a>
                        <a href="#test2">æµ‹è¯•é“¾æ¥ 2</a>
                        <a href="#test3">æµ‹è¯•é“¾æ¥ 3</a>
                        <a href="#test4">æµ‹è¯•é“¾æ¥ 4</a>
                        <a href="#test5">æµ‹è¯•é“¾æ¥ 5</a>
                        <a href="https://www.google.com" target="_blank" rel="noopener">Google</a>
                        <a href="https://www.github.com" target="_blank" rel="noopener">GitHub</a>
                        <a href="https://www.stackoverflow.com" target="_blank" rel="noopener">Stack Overflow</a>
                    </div>
                </div>
                
                <div class="section">
                    <h2>ğŸ” æœç´¢åŠŸèƒ½æµ‹è¯•</h2>
                    <p>æŒ‰ <kbd>/</kbd> é”®æ¿€æ´»æœç´¢åŠŸèƒ½ï¼Œæµ‹è¯•æœç´¢é«˜äº®æ˜¯å¦æ­£ç¡®æ˜¾ç¤ºï¼š</p>
                    <div class="status-info">
                        <p>æœç´¢æµ‹è¯•æ–‡æœ¬ï¼šJavaScript, HTML, CSS, rVim, ä¼˜åŒ–, æ ·å¼, å†²çª, æµ‹è¯•</p>
                        <p>è¿™é‡Œæœ‰ä¸€äº›é‡å¤çš„è¯æ±‡ï¼šJavaScript JavaScript HTML CSS rVim rVim</p>
                        <p>ç‰¹æ®Šå­—ç¬¦æµ‹è¯•ï¼š@#$%^&*()_+-=[]{}|;':",./<>?</p>
                    </div>
                </div>
                
                <div class="section">
                    <h2>âŒ¨ï¸ å‘½ä»¤æ æµ‹è¯•</h2>
                    <p>æŒ‰ <kbd>:</kbd> é”®æ¿€æ´»å‘½ä»¤æ ï¼Œæµ‹è¯•å‘½ä»¤æ æ˜¯å¦èƒ½æ­£ç¡®æ˜¾ç¤ºï¼š</p>
                    <div class="button-group">
                        <button class="btn btn-primary" onclick="testCommand(':help')">æµ‹è¯• :help</button>
                        <button class="btn btn-secondary" onclick="testCommand(':set')">æµ‹è¯• :set</button>
                        <button class="btn btn-success" onclick="testCommand(':tabnew')">æµ‹è¯• :tabnew</button>
                        <button class="btn btn-warning" onclick="testCommand(':quit')">æµ‹è¯• :quit</button>
                    </div>
                </div>
                
                <div class="section">
                    <h2>ğŸ“Š æ ·å¼å†²çªæ¼”ç¤ºåŒºåŸŸ</h2>
                    <div class="conflict-demo pulse">
                        è¿™ä¸ªåŒºåŸŸåŒ…å«å¤æ‚çš„æ ·å¼ï¼Œç”¨äºæµ‹è¯•æ’ä»¶å…ƒç´ çš„æ˜¾ç¤ºæ•ˆæœ
                    </div>
                </div>
                
                <div class="section">
                    <h2>ğŸ› ï¸ æ ·å¼ä¼˜åŒ–å™¨æ§åˆ¶</h2>
                    <div class="button-group">
                        <button class="btn btn-primary" onclick="getOptimizerStatus()">è·å–ä¼˜åŒ–çŠ¶æ€</button>
                        <button class="btn btn-secondary" onclick="toggleOptimizer()">åˆ‡æ¢ä¼˜åŒ–å™¨</button>
                        <button class="btn btn-success" onclick="forceDetection()">å¼ºåˆ¶æ£€æµ‹å†²çª</button>
                        <button class="btn btn-warning" onclick="resetStyles()">é‡ç½®æ ·å¼</button>
                    </div>
                    <div id="optimizer-status" class="status-info">
                        ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æŸ¥çœ‹æ ·å¼ä¼˜åŒ–å™¨çŠ¶æ€...
                    </div>
                </div>
                
                <div class="section">
                    <h2>ğŸ“ æµ‹è¯•è¯´æ˜</h2>
                    <ul>
                        <li><strong>é“¾æ¥æç¤ºæµ‹è¯•ï¼š</strong>æŒ‰ <kbd>f</kbd> é”®ï¼Œæ£€æŸ¥é“¾æ¥æç¤ºæ˜¯å¦æ¸…æ™°å¯è§ï¼Œä¸è¢«é¡µé¢æ ·å¼å½±å“</li>
                        <li><strong>æœç´¢åŠŸèƒ½æµ‹è¯•ï¼š</strong>æŒ‰ <kbd>/</kbd> é”®æœç´¢æ–‡æœ¬ï¼Œæ£€æŸ¥é«˜äº®æ•ˆæœæ˜¯å¦æ­£å¸¸</li>
                        <li><strong>å‘½ä»¤æ æµ‹è¯•ï¼š</strong>æŒ‰ <kbd>:</kbd> é”®ï¼Œæ£€æŸ¥å‘½ä»¤æ æ˜¯å¦åœ¨åº•éƒ¨æ­£ç¡®æ˜¾ç¤º</li>
                        <li><strong>HUDæµ‹è¯•ï¼š</strong>æ‰§è¡Œå„ç§æ“ä½œï¼Œæ£€æŸ¥å³ä¸Šè§’çš„HUDæç¤ºæ˜¯å¦æ­£å¸¸</li>
                        <li><strong>z-indexæµ‹è¯•ï¼š</strong>æ‰€æœ‰æ’ä»¶å…ƒç´ åº”è¯¥æ˜¾ç¤ºåœ¨çº¢è‰²è¦†ç›–å±‚ä¹‹ä¸Š</li>
                        <li><strong>å­—ä½“æµ‹è¯•ï¼š</strong>æ’ä»¶å…ƒç´ åº”è¯¥ä½¿ç”¨ç­‰å®½å­—ä½“ï¼Œä¸å—é¡µé¢å­—ä½“å½±å“</li>
                    </ul>
                </div>
                
                <div class="section bootstrap-like material-like">
                    <h2>ğŸ¨ ç¬¬ä¸‰æ–¹æ ·å¼æ¨¡æ‹Ÿ</h2>
                    <p>è¿™ä¸ªåŒºåŸŸæ¨¡æ‹Ÿäº†Bootstrapå’ŒMaterial Designçš„æ ·å¼ï¼Œç”¨äºæµ‹è¯•æ’ä»¶ä¸ç¬¬ä¸‰æ–¹æ¡†æ¶çš„å…¼å®¹æ€§ã€‚</p>
                    <div class="test-links">
                        <a href="#bootstrap">Bootstrapæ ·å¼é“¾æ¥</a>
                        <a href="#material">Materialæ ·å¼é“¾æ¥</a>
                        <a href="#custom">è‡ªå®šä¹‰æ ·å¼é“¾æ¥</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // æµ‹è¯•è„šæœ¬
        function testCommand(command) {
            alert(`æ¨¡æ‹Ÿæ‰§è¡Œå‘½ä»¤: ${command}\nè¯·æ‰‹åŠ¨æŒ‰ : é”®æµ‹è¯•å®é™…å‘½ä»¤æ åŠŸèƒ½`);
        }
        
        function getOptimizerStatus() {
            const statusDiv = document.getElementById('optimizer-status');
            
            if (window.rVimStyleOptimizer) {
                const status = window.rVimStyleOptimizer.getStatusReport();
                statusDiv.innerHTML = `
                    <h4>æ ·å¼ä¼˜åŒ–å™¨çŠ¶æ€æŠ¥å‘Š</h4>
                    <p><strong>ä¼˜åŒ–çŠ¶æ€:</strong> ${status.isOptimized ? 'å·²å¯ç”¨' : 'æœªå¯ç”¨'}</p>
                    <p><strong>æ£€æµ‹åˆ°çš„å†²çª:</strong> ${status.conflictsDetected} ä¸ª</p>
                    <p><strong>æ£€æµ‹æ—¶é—´:</strong> ${status.timestamp}</p>
                    <p><strong>é…ç½®:</strong></p>
                    <pre>${JSON.stringify(status.config, null, 2)}</pre>
                    ${status.conflicts.length > 0 ? `
                    <p><strong>å†²çªè¯¦æƒ…:</strong></p>
                    <pre>${JSON.stringify(status.conflicts, null, 2)}</pre>
                    ` : ''}
                `;
            } else {
                statusDiv.innerHTML = '<p style="color: red;">æ ·å¼ä¼˜åŒ–å™¨æœªæ‰¾åˆ°æˆ–æœªåˆå§‹åŒ–</p>';
            }
        }
        
        function toggleOptimizer() {
            const statusDiv = document.getElementById('optimizer-status');
            
            if (window.rVimStyleOptimizer) {
                if (window.rVimStyleOptimizer.isOptimized) {
                    window.rVimStyleOptimizer.stop();
                    statusDiv.innerHTML = '<p style="color: orange;">æ ·å¼ä¼˜åŒ–å™¨å·²åœæ­¢</p>';
                } else {
                    window.rVimStyleOptimizer.start();
                    statusDiv.innerHTML = '<p style="color: green;">æ ·å¼ä¼˜åŒ–å™¨å·²å¯åŠ¨</p>';
                }
            } else {
                statusDiv.innerHTML = '<p style="color: red;">æ ·å¼ä¼˜åŒ–å™¨æœªæ‰¾åˆ°</p>';
            }
        }
        
        function forceDetection() {
            const statusDiv = document.getElementById('optimizer-status');
            
            if (window.rVimStyleOptimizer) {
                window.rVimStyleOptimizer.detectAndFixConflicts();
                statusDiv.innerHTML = '<p style="color: blue;">å·²å¼ºåˆ¶æ‰§è¡Œå†²çªæ£€æµ‹å’Œä¿®å¤</p>';
                
                // 1ç§’åæ˜¾ç¤ºçŠ¶æ€
                setTimeout(getOptimizerStatus, 1000);
            } else {
                statusDiv.innerHTML = '<p style="color: red;">æ ·å¼ä¼˜åŒ–å™¨æœªæ‰¾åˆ°</p>';
            }
        }
        
        function resetStyles() {
            const statusDiv = document.getElementById('optimizer-status');
            
            if (window.rVimStyleOptimizer) {
                window.rVimStyleOptimizer.restoreOriginalStyles();
                statusDiv.innerHTML = '<p style="color: purple;">å·²é‡ç½®ä¸ºåŸå§‹æ ·å¼</p>';
            } else {
                statusDiv.innerHTML = '<p style="color: red;">æ ·å¼ä¼˜åŒ–å™¨æœªæ‰¾åˆ°</p>';
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('æ ·å¼ä¼˜åŒ–æµ‹è¯•é¡µé¢å·²åŠ è½½');
            
            // æ£€æŸ¥æ ·å¼ä¼˜åŒ–å™¨æ˜¯å¦å¯ç”¨
            setTimeout(() => {
                const statusDiv = document.getElementById('optimizer-status');
                if (window.rVimStyleOptimizer) {
                    statusDiv.innerHTML = '<p style="color: green;">âœ… æ ·å¼ä¼˜åŒ–å™¨å·²æ£€æµ‹åˆ°å¹¶å¯ç”¨</p>';
                } else {
                    statusDiv.innerHTML = '<p style="color: red;">âŒ æ ·å¼ä¼˜åŒ–å™¨æœªæ£€æµ‹åˆ°</p>';
                }
            }, 2000);
        });
        
        // æ·»åŠ ä¸€äº›åŠ¨æ€å†…å®¹æ¥æµ‹è¯•DOMå˜åŒ–ç›‘å¬
        setInterval(() => {
            const demo = document.querySelector('.conflict-demo');
            if (demo) {
                const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3'];
                const randomColor1 = colors[Math.floor(Math.random() * colors.length)];
                const randomColor2 = colors[Math.floor(Math.random() * colors.length)];
                demo.style.background = `linear-gradient(45deg, ${randomColor1}, ${randomColor2})`;
            }
        }, 5000);
    </script>
</body>
</html>